#!/bin/sh

# Execute different operations based on mouse button
case $BUTTON in
    1) notify-send "󰻠 CPU hogs" "$(ps axch -o cmd:15,%cpu --sort=-%cpu | head)\\n(100% per core)" ;;
    2) "$TERMINAL" -e "$EDITOR" "$0" ;;
    3) setsid -f "$TERMINAL" -e htop ;;
esac

# Extract CPU temperature from sensors output (k10temp's Tctl)
# Match Tctl line, extract temperature value and keep 1 decimal, add icon output
temp=$(sensors -u 2>/dev/null | awk '/(temp1_input|Tctl_input):/ {printf "%.0f°C", $2; exit}')
[ -n "$temp" ] && echo "$temp󰔏" || echo "󰔏"
